<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <!-- <link rel="stylesheet" href="css/home.css"> -->
  <!-- <link rel="stylesheet" href="css/inbox.css">
    <link rel="stylesheet" href="css/compose.css"> -->
  <link rel="stylesheet" href="css/memo.css">
  <!--Icons-->
  <link rel="stylesheet" href="fa/css/brands.css" />
  <link rel="stylesheet" href="fa/css/solid.css" />
  <link rel="stylesheet" href="fa/css/fontawesome.css" />
  <link rel="stylesheet" href="fa/css/regular.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js">
  </script>
  <title>Edit Memo</title>
</head>

<body>
  <div class="main">
    <!-- Top Navigation-->
    <nav>
      <div class="logo">
        <img src="img/logo2.png" alt="Logo is here">
      </div>
      <div class="links">
        <ul>
          <li><a href="home.html">Home</a></li>
          <li><a href="#">About</a></li>
        </ul>
      </div>
      <div class="menu">
        <ul>
          <li><a href="#">INTEGRITY</a></li>
          <li><a href="#">FAIRNESS</a></li>
          <li><a href="#">SERVICE</a></li>
          <li><a href="profile.html"><i class="fas fa-user"></i></a></li>
        </ul>
      </div>
    </nav>
    <section>
      <!--a href="compose.html" class="arrow"-->
      <!--img src="RemixIcon-2.5.0/icons/System/arrow-go-back-line.svg" alt=""-->
      <!-- </a> -->
      <ul class="edit-memo">
        <li><a onclick="history.back()" href="#">Back</a></li>
        <li><a id="btnPrint" href="">Print</a></li>
      </ul>

      <div id="memo-content" class="memo-content">

        <div class="letter-head">
          <img src="img/logo2.png" alt="Logo is here">
          <h1>SUPPORT SERVICE DIVISION</h1>
          <h2>DEPARTMENT</h2>
          <h3>MEMORANDUM</h3>
        </div>
        <table class="memo-meta">
          <tr>
            <th>TO:</th>
            <td id="to"></td>
          </tr>
          <tr>
            <th>FROM:</th>
            <td id="from"></td>
          </tr>
          <tr>
            <th>THROUGH:</th>
            <td id="through"></td>
          </tr>
          <tr>
            <th>CC:</th>
            <td id="cc"></td>
          </tr>
          <tr>
            <th>REF:</th>
            <td id="ref"></td>
          </tr>
          <tr>
            <th>DATE:</th>
            <td id="date"></td>
          </tr>
          <tr>
            <th>SUBJECT:</th>
            <td id="subject"></td>
          </tr>
        </table>

        <hr>
        <p id="body"></p>
        <p id="minute"></p>
        <div class="memo-footer">
          <!-- <hr> -->
          <img class="signature" src="img/sign.svg" alt="Signature" width="20px">
          <p id="signedName">Signature</p>
        </div>

      </div>
    </section>

    <script>


      const btnPrint = document.getElementById("btnPrint");
      const makepdf = document.getElementById("memo-content");


      btnPrint.addEventListener("click", function (e) {
        e.preventDefault();
        html2pdf().from(makepdf).save();
        return true;

      });
    </script>

    <script type="module">
      import { db } from "./js/firebase.js";
      import { doc, query, where, getDoc } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-firestore.js";

      const params = new Proxy(new URLSearchParams(window.location.search), {
        get: (searchParams, prop) => searchParams.get(prop),
      });
      // const q = query(doc(db, "memo", params.id));
      // getDoc(q).then((querySnapshot) => {
      //   // Set the text contents of the fields
      //   document.getElementById("to").textContent = querySnapshot.data().to;
      //   document.getElementById("from").textContent = querySnapshot.data().from;
      //   document.getElementById("through").textContent = querySnapshot.data().through;
      //   document.getElementById("cc").textContent = querySnapshot.data().cc;
      //   document.getElementById("ref").textContent = querySnapshot.data().ref;
      //   document.getElementById("date").textContent = querySnapshot.data().date;
      //   document.getElementById("subject").textContent = querySnapshot.data().subject;
      //   document.getElementById("body").textContent = querySnapshot.data().body;
      //   document.getElementById("minute").textContent = querySnapshot.data().minute;
      //   document.getElementById("divisions").innerHTML = querySnapshot.data().divisions.toUpperCase();
      //   // document.getElementById("signedName").textContent = authUser.firstname + ' ' +authUser.lastname;
      // }).catch((error) => {
      //   console.log(error);
      // });
      const meno = JSON.parse(localStorage.getItem(params.id));

      document.getElementById("to").textContent = meno.to;
        document.getElementById("from").textContent = meno.from;
        document.getElementById("through").textContent = meno.through;
        document.getElementById("cc").textContent = meno.cc;
        document.getElementById("ref").textContent = meno.ref;
        document.getElementById("date").textContent = meno.date;
        document.getElementById("subject").textContent = meno.subject;
        document.getElementById("body").textContent = meno.body;
        document.getElementById("minute").textContent = meno.minute;
        document.getElementById("divisions").innerHTML = meno.divisions.toUpperCase();

    </script>

</body>

</html>